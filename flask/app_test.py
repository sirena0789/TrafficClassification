import random
from locust import HttpUser, task, constant_throughput

test_applications = [
    {' Flow Duration': 94902.0,
 ' Total Fwd Packets': 1.0,
 'Total Length of Fwd Packets': 0.0,
 ' Fwd Packet Length Max': 0.0,
 ' Fwd Packet Length Min': 0.0,
 ' Fwd Packet Length Mean': 0.0,
 'Bwd Packet Length Max': 0.0,
 ' Bwd Packet Length Min': 0.0,
 'Flow Bytes/s': 0.0,
 ' Flow Packets/s': 21.07437146,
 ' Flow IAT Mean': 94902.0,
 ' Flow IAT Std': 0.0,
 ' Flow IAT Min': 94902.0,
 ' Fwd IAT Mean': 0.0,
 ' Fwd IAT Std': 0.0,
 ' Fwd IAT Min': 0.0,
 'Bwd IAT Total': 0.0,
 ' Bwd IAT Mean': 0.0,
 ' Bwd IAT Std': 0.0,
 ' Bwd IAT Max': 0.0,
 ' Bwd IAT Min': 0.0,
 'Fwd PSH Flags': 0.0,
 ' Fwd URG Flags': 0.0,
 ' Fwd Header Length': 32.0,
 'Fwd Packets/s': 10.537186,
 ' Bwd Packets/s': 10.537186,
 ' Min Packet Length': 0.0,
 ' Packet Length Variance': 0.0,
 'FIN Flag Count': 0.0,
 ' RST Flag Count': 0.0,
 ' PSH Flag Count': 0.0,
 ' ACK Flag Count': 1.0,
 ' URG Flag Count': 1.0,
 ' Down/Up Ratio': 1.0,
 'Init_Win_bytes_forward': 304.0,
 ' Init_Win_bytes_backward': 254.0,
 ' act_data_pkt_fwd': 0.0,
 'Active Mean': 0.0,
 ' Active Std': 0.0,
 ' Active Max': 0.0,
 ' Active Min': 0.0,
 ' Idle Std': 0.0},
    
    {' Flow Duration': 97520326.0,
 ' Total Fwd Packets': 4.0,
 'Total Length of Fwd Packets': 382.0,
 ' Fwd Packet Length Max': 376.0,
 ' Fwd Packet Length Min': 0.0,
 ' Fwd Packet Length Mean': 95.5,
 'Bwd Packet Length Max': 4344.0,
 ' Bwd Packet Length Min': 0.0,
 'Flow Bytes/s': 122.8154221,
 ' Flow Packets/s': 0.102542725,
 ' Flow IAT Mean': 10800000.0,
 ' Flow IAT Std': 32500000.0,
 ' Flow IAT Min': 2.0,
 ' Fwd IAT Mean': 32500000.0,
 ' Fwd IAT Std': 56300000.0,
 ' Fwd IAT Min': 2.0,
 'Bwd IAT Total': 57453.0,
 ' Bwd IAT Mean': 11490.6,
 ' Bwd IAT Std': 19521.406,
 ' Bwd IAT Max': 45175.0,
 ' Bwd IAT Min': 47.0,
 'Fwd PSH Flags': 0.0,
 ' Fwd URG Flags': 0.0,
 ' Fwd Header Length': 124.0,
 'Fwd Packets/s': 0.04101709,
 ' Bwd Packets/s': 0.061525635,
 ' Min Packet Length': 0.0,
 ' Packet Length Variance': 2489210.8,
 'FIN Flag Count': 1.0,
 ' RST Flag Count': 0.0,
 ' PSH Flag Count': 0.0,
 ' ACK Flag Count': 0.0,
 ' URG Flag Count': 0.0,
 ' Down/Up Ratio': 1.0,
 'Init_Win_bytes_forward': 0.0,
 ' Init_Win_bytes_backward': 235.0,
 ' act_data_pkt_fwd': 1.0,
 'Active Mean': 0.0,
 ' Active Std': 0.0,
 ' Active Max': 0.0,
 ' Active Min': 0.0,
 ' Idle Std': 0.0}
]


class BankLoan(HttpUser):
    wait_time = constant_throughput(1)

    @task
    def predict(self):
        self.client.post(
            "/predict",
            json=random.choice(test_applications),
            timeout=1,
        )
